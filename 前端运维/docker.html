<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Create or coding | Create or coding</title>
    <meta name="description" content="A VitePress site">
    <link rel="preload stylesheet" href="/assets/style.ae1251fb.css" as="style">
    <link rel="modulepreload" href="/assets/app.1c8695ff.js">
    <link rel="modulepreload" href="/assets/å‰ç«¯è¿ç»´_docker.md.e371afdf.lean.js">
    
    <script>var _hmt=_hmt||[];(function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?af110c84612806edd3af36a0678759fb";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-93a960b4><!--[--><!--]--><!--[--><span tabindex="-1" data-v-151f2593></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-151f2593> Skip to content </a><!--]--><!----><header class="VPNav" data-v-93a960b4 data-v-0fa0e57d><div class="VPNavBar has-sidebar" data-v-0fa0e57d data-v-be450ad9><div class="container" data-v-be450ad9><div class="title" data-v-be450ad9><div class="VPNavBarTitle has-sidebar" data-v-be450ad9 data-v-6d2fb2d9><a class="title" href="/" data-v-6d2fb2d9><!--[--><!--]--><!----><!--[-->Code More Create<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-be450ad9><div class="curtain" data-v-be450ad9></div><div class="content-body" data-v-be450ad9><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-be450ad9 data-v-bdedfc22><span id="main-nav-aria-label" class="visually-hidden" data-v-bdedfc22>Main Navigation</span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-bdedfc22 data-v-96001b6b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-96001b6b><span class="text" data-v-96001b6b><!----> js <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-96001b6b><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-96001b6b><div class="VPMenu" data-v-96001b6b data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-a5bbb52c><a class="VPLink link" href="/js/es6/1.let%E5%92%8Cconst%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E.html" data-v-a5bbb52c data-v-30c06bd3><!--[-->es6<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-a5bbb52c><a class="VPLink link" href="/js/interview/1.%E5%AE%9E%E7%8E%B0new%E5%AE%9E%E4%BE%8B%E5%8C%96%E5%AF%B9%E8%B1%A1.html" data-v-a5bbb52c data-v-30c06bd3><!--[-->interview<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-a5bbb52c><a class="VPLink link" href="/js/%E5%9F%BA%E7%A1%80/1.%E5%8F%AF%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87.html" data-v-a5bbb52c data-v-30c06bd3><!--[-->åŸºç¡€<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-bdedfc22 data-v-96001b6b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-96001b6b><span class="text" data-v-96001b6b><!----> å‰ç«¯è¿ç»´ <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-96001b6b><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-96001b6b><div class="VPMenu" data-v-96001b6b data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-a5bbb52c><a class="VPLink link" href="/%E5%89%8D%E7%AB%AF%E8%BF%90%E7%BB%B4/CICD.html" data-v-a5bbb52c data-v-30c06bd3><!--[-->CICD<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-a5bbb52c><a class="VPLink link active" href="/%E5%89%8D%E7%AB%AF%E8%BF%90%E7%BB%B4/docker.html" data-v-a5bbb52c data-v-30c06bd3><!--[-->docker<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-a5bbb52c><a class="VPLink link" href="/%E5%89%8D%E7%AB%AF%E8%BF%90%E7%BB%B4/linux%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4.html" data-v-a5bbb52c data-v-30c06bd3><!--[-->linuxå¸¸è§å‘½ä»¤<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-a5bbb52c><a class="VPLink link" href="/%E5%89%8D%E7%AB%AF%E8%BF%90%E7%BB%B4/nginx.html" data-v-a5bbb52c data-v-30c06bd3><!--[-->nginx<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-a5bbb52c><a class="VPLink link" href="/%E5%89%8D%E7%AB%AF%E8%BF%90%E7%BB%B4/vim.html" data-v-a5bbb52c data-v-30c06bd3><!--[-->vim<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-bdedfc22 data-v-96001b6b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-96001b6b><span class="text" data-v-96001b6b><!----> ç½‘ç»œ <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-96001b6b><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-96001b6b><div class="VPMenu" data-v-96001b6b data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-a5bbb52c><a class="VPLink link" href="/%E7%BD%91%E7%BB%9C/http.html" data-v-a5bbb52c data-v-30c06bd3><!--[-->http<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-a5bbb52c><a class="VPLink link" href="/%E7%BD%91%E7%BB%9C/https.html" data-v-a5bbb52c data-v-30c06bd3><!--[-->https<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-a5bbb52c><a class="VPLink link" href="/%E7%BD%91%E7%BB%9C/tcp.html" data-v-a5bbb52c data-v-30c06bd3><!--[-->tcp<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/README.html" data-v-bdedfc22 data-v-95f5d58b data-v-30c06bd3><!--[-->README<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="https://algorithm.wendaobai.top" target="_blank" rel="noreferrer" data-v-bdedfc22 data-v-95f5d58b data-v-30c06bd3><!--[-->ğŸ„ğŸ»â€â™‚ï¸ ç®—æ³•ç¬”è®°<!--]--><!----></a><!--]--><!--]--></nav><!----><!----><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-be450ad9 data-v-2ab2a029 data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/wendaobai" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-be450ad9 data-v-66bb1f24 data-v-96001b6b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-96001b6b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-96001b6b><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-96001b6b><div class="VPMenu" data-v-96001b6b data-v-e7ea1737><!----><!--[--><!--[--><!----><!----><div class="group" data-v-66bb1f24><div class="item social-links" data-v-66bb1f24><div class="VPSocialLinks social-links-list" data-v-66bb1f24 data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/wendaobai" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-be450ad9 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav" data-v-93a960b4 data-v-2817d72e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2817d72e><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-2817d72e><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-2817d72e>Menu</span></button><a class="top-link" href="#" data-v-2817d72e>Return to top</a></div><aside class="VPSidebar" data-v-93a960b4 data-v-c79ccefa><div class="curtain" data-v-c79ccefa></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-c79ccefa><span class="visually-hidden" id="sidebar-aria-label" data-v-c79ccefa> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-c79ccefa><section class="VPSidebarItem level-0 collapsible has-active" data-v-c79ccefa data-v-b05232f3><div class="item" role="button" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link" data-v-b05232f3 data-v-30c06bd3><!--[--><h2 class="text" data-v-b05232f3>å‰ç«¯è¿ç»´</h2><!--]--><!----></a><div class="caret" role="button" data-v-b05232f3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-b05232f3><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/%E5%89%8D%E7%AB%AF%E8%BF%90%E7%BB%B4/CICD.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>CICD</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link is-active has-active" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/%E5%89%8D%E7%AB%AF%E8%BF%90%E7%BB%B4/docker.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>docker</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/%E5%89%8D%E7%AB%AF%E8%BF%90%E7%BB%B4/linux%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>linuxå¸¸è§å‘½ä»¤</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/%E5%89%8D%E7%AB%AF%E8%BF%90%E7%BB%B4/nginx.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>nginx</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/%E5%89%8D%E7%AB%AF%E8%BF%90%E7%BB%B4/vim.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>vim</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-93a960b4 data-v-0bd490fb><div class="VPDoc has-sidebar has-aside" data-v-0bd490fb data-v-c5936a1e><div class="container" data-v-c5936a1e><div class="aside" data-v-c5936a1e><div class="aside-curtain" data-v-c5936a1e></div><div class="aside-container" data-v-c5936a1e><div class="aside-content" data-v-c5936a1e><div class="VPDocAside" data-v-c5936a1e data-v-cdc66372><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-cdc66372 data-v-5dd9d5f6><div class="content" data-v-5dd9d5f6><div class="outline-marker" data-v-5dd9d5f6></div><div class="outline-title" data-v-5dd9d5f6>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-5dd9d5f6><span class="visually-hidden" id="doc-outline-aria-label" data-v-5dd9d5f6> Table of Contents for current page </span><ul class="root" data-v-5dd9d5f6 data-v-1188541a><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-cdc66372></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-c5936a1e><div class="content-container" data-v-c5936a1e><!--[--><!--]--><main class="main" data-v-c5936a1e><div style="position:relative;" class="vp-doc _%E5%89%8D%E7%AB%AF%E8%BF%90%E7%BB%B4_docker" data-v-c5936a1e><div><p>docker</p><h2 id="ä»€ä¹ˆæ˜¯docker" tabindex="-1">ä»€ä¹ˆæ˜¯docker <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯docker" aria-hidden="true">#</a></h2><ul><li><p>è½¯ä»¶éƒ¨ç½²çš„é—®é¢˜ï¼šå¦‚æœè¦è®©è½¯ä»¶è¿è¡Œèµ·æ¥ï¼Œå°±å¿…é¡»ä¿è¯æ“ä½œç³»ç»Ÿè®¾ç½®ç¯å¢ƒï¼Œä¿è¯å„è‡ªåº“ä¸ç»„ä»¶éƒ½èƒ½å®‰è£…è¿è¡Œ</p></li><li><p>è™šæ‹Ÿæœºå°±æ˜¯å¸¦ç¯å¢ƒå®‰è£…çš„è§£å†³æ–¹æ¡ˆï¼Œå®ƒå¯ä»¥åœ¨ä¸€ç§æ“ä½œç³»ç»Ÿä¸­è¿è¡Œå¦ä¸€ç§æ“ä½œç³»ç»Ÿ</p><p>é—®é¢˜ï¼š</p><ul><li>èµ„æºå ç”¨å¤š</li><li>å†—ä½™æ­¥éª¤å¤š</li><li>å¯åŠ¨é€Ÿåº¦æ…¢</li></ul></li><li><p>Linuxå®¹å™¨åŒ–</p><p>ç”±äºè™šæ‹Ÿæœºå­˜åœ¨è¿™äº›ç¼ºç‚¹ï¼ŒLinux å‘å±•å‡ºäº†å¦ä¸€ç§è™šæ‹ŸåŒ–æŠ€æœ¯ï¼šLinux å®¹å™¨ï¼ˆLinux Containersï¼Œç¼©å†™ä¸º LXCï¼‰ã€‚</p><p>Linux å®¹å™¨ä¸æ˜¯æ¨¡æ‹Ÿä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œè€Œæ˜¯å¯¹è¿›ç¨‹è¿›è¡Œéš”ç¦»ã€‚æˆ–è€…è¯´ï¼Œåœ¨æ­£å¸¸è¿›ç¨‹çš„å¤–é¢å¥—äº†ä¸€ä¸ªä¿æŠ¤å±‚ã€‚å¯¹äºå®¹å™¨é‡Œé¢çš„è¿›ç¨‹æ¥è¯´ï¼Œå®ƒæ¥è§¦åˆ°çš„å„ç§èµ„æºéƒ½æ˜¯è™šæ‹Ÿçš„ï¼Œä»è€Œå®ç°ä¸åº•å±‚ç³»ç»Ÿçš„éš”ç¦»ã€‚</p><ul><li>å¯åŠ¨å¿«</li><li>èµ„æºå ç”¨å°‘</li><li>ä½“ç§¯å°</li></ul></li><li><p>Docker å±äº Linux å®¹å™¨çš„ä¸€ç§å°è£…ï¼Œæä¾›ç®€å•æ˜“ç”¨çš„å®¹å™¨ä½¿ç”¨æ¥å£ã€‚å®ƒæ˜¯ç›®å‰æœ€æµè¡Œçš„ Linux å®¹å™¨è§£å†³æ–¹æ¡ˆ</p></li><li><p>Docker å°†åº”ç”¨ç¨‹åºä¸è¯¥ç¨‹åºçš„ä¾èµ–ï¼Œæ‰“åŒ…åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ã€‚è¿è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿå®¹å™¨ã€‚ç¨‹åºåœ¨è¿™ä¸ªè™šæ‹Ÿå®¹å™¨é‡Œè¿è¡Œï¼Œå°±å¥½åƒåœ¨çœŸå®çš„ç‰©ç†æœºä¸Šè¿è¡Œä¸€æ ·</p></li></ul><h2 id="dockerå’Œkvm" tabindex="-1">dockerå’ŒKVM <a class="header-anchor" href="#dockerå’Œkvm" aria-hidden="true">#</a></h2><p>dockeræ˜¯è™šæ‹Ÿä¸€ä¸ªå¾®æœåŠ¡æ‰€éœ€è¦çš„ç¯å¢ƒå®¹å™¨ï¼Œkvmæ˜¯ç¡¬ä»¶è™šæ‹ŸåŒ–ï¼Œè™šæ‹Ÿä¸€ä¸ªæ“ä½œç³»ç»Ÿ</p><ul><li>å¯åŠ¨æ—¶é—´ <ul><li>Dockerç§’çº§å¯åŠ¨</li><li>KVMåˆ†é’Ÿçº§å¯åŠ¨</li></ul></li><li>è½»é‡çº§ å®¹å™¨é•œåƒé€šå¸¸ä»¥Mä¸ºå•ä½ï¼Œè™šæ‹Ÿæœºä»¥Gä¸ºå•ä½ï¼Œå®¹å™¨èµ„æºå ç”¨å°ï¼Œè¦æ¯”è™šæ‹Ÿè¦éƒ¨ç½²æ›´å¿«é€Ÿ <ul><li>å®¹å™¨å…±äº«å®¿ä¸»æœºå†…æ ¸ï¼Œç³»ç»Ÿçº§è™šæ‹ŸåŒ–ï¼Œå ç”¨èµ„æºå°‘ï¼Œå®¹å™¨æ€§èƒ½åŸºæœ¬æ¥è¿‘ç‰©ç†æœº</li><li>è™šæ‹Ÿæœºéœ€è¦è™šæ‹ŸåŒ–ä¸€äº›è®¾å¤‡ï¼Œå…·æœ‰å®Œæ•´çš„OS,è™šæ‹Ÿæœºå¼€é”€å¤§ï¼Œå› è€Œé™ä½æ€§èƒ½ï¼Œæ²¡æœ‰å®¹å™¨æ€§èƒ½å¥½</li></ul></li><li>å®‰å…¨æ€§ <ul><li>ç”±äºå…±äº«å®¿ä¸»æœºå†…æ ¸ï¼Œåªæ˜¯è¿›ç¨‹éš”ç¦»ï¼Œå› æ­¤éš”ç¦»æ€§å’Œç¨³å®šæ€§ä¸å¦‚è™šæ‹Ÿæœºï¼Œå®¹å™¨å…·æœ‰ä¸€å®šæƒé™è®¿é—®å®¿ä¸»æœºå†…æ ¸ï¼Œå­˜åœ¨ä¸€ä¸‹å®‰å…¨éšæ‚£</li></ul></li><li>ä½¿ç”¨è¦æ±‚ <ul><li>KVMåŸºäºç¡¬ä»¶çš„å®Œå…¨è™šæ‹ŸåŒ–ï¼Œéœ€è¦ç¡¬ä»¶CPUè™šæ‹ŸåŒ–æŠ€æœ¯æ”¯æŒ</li><li>å®¹å™¨å…±äº«å®¿ä¸»æœºå†…æ ¸ï¼Œå¯è¿è¡Œåœ¨ä¸»æœºçš„Linuxçš„å‘è¡Œç‰ˆï¼Œä¸ç”¨è€ƒè™‘CPUæ˜¯å¦æ”¯æŒè™šæ‹ŸåŒ–æŠ€æœ¯</li></ul></li></ul><h2 id="dockeræ¶æ„" tabindex="-1">dockeræ¶æ„ <a class="header-anchor" href="#dockeræ¶æ„" aria-hidden="true">#</a></h2><img src="/assets/image-20230314102457605.9326583b.png" alt="image-20230314102457605" style="zoom:50%;"><ul><li>containerd æ˜¯ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œä½¿ç”¨runcç®¡ç†å®¹å™¨ï¼Œå‘Docker Engineæä¾›æ¥å£</li><li>shim åªè´Ÿè´£ç®¡ç†ä¸€ä¸ªå®¹å™¨</li><li>runCæ˜¯ä¸€ä¸ªè½»é‡çº§å·¥å…·ï¼Œåªç”¨æ¥è¿è¡Œå®¹å™¨</li></ul><img src="/assets/image-20230314102615256.22656ba3.png" alt="image-20230314102615256" style="zoom:67%;"><p><code>Docker</code> åœ¨è¿è¡Œæ—¶åˆ†ä¸º <code>Docker å¼•æ“ï¼ˆæœåŠ¡ç«¯å®ˆæŠ¤è¿›ç¨‹ï¼‰</code> å’Œ <code>å®¢æˆ·ç«¯å·¥å…·</code>ï¼Œæˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨å„ç§ <code>docker å‘½ä»¤</code>ï¼Œå…¶å®å°±æ˜¯åœ¨ä½¿ç”¨ <code>å®¢æˆ·ç«¯å·¥å…·</code> ä¸ <code>Docker å¼•æ“</code> è¿›è¡Œäº¤äº’ã€‚è¿˜æœ‰ä¸€ä¸ªdockeré•œåƒä»“åº“</p><h2 id="dockerå®‰è£…" tabindex="-1">dockerå®‰è£… <a class="header-anchor" href="#dockerå®‰è£…" aria-hidden="true">#</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yum-utils</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">device-mapper-persistent-data</span><span style="color:#A6ACCD;">   </span><span style="color:#C3E88D;">lvm2</span></span>
<span class="line"><span style="color:#FFCB6B;">yum-config-manager</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">--add-repo</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">https://download.docker.com/linux/centos/docker-ce.repo</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-ce</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-ce-cli</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">containerd.io</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span></span>
<span class="line"></span></code></pre></div><h3 id="å¯åŠ¨" tabindex="-1">å¯åŠ¨ <a class="header-anchor" href="#å¯åŠ¨" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># </span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vesion</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">info</span></span>
<span class="line"><span style="color:#FFCB6B;">systemctl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">remove</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># å¸è½½docker</span></span>
<span class="line"><span style="color:#FFCB6B;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-rf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/var/lib/docker</span></span>
<span class="line"></span></code></pre></div><h2 id="é•œåƒimage" tabindex="-1">é•œåƒimage <a class="header-anchor" href="#é•œåƒimage" aria-hidden="true">#</a></h2><ul><li>Dockerå°†è¿ç”¨ç¨‹åºå’Œä¾èµ–åŒ…æ‰“åŒ…åœ¨Imageä¸­ï¼Œåªæœ‰é€šè¿‡imageæ‰èƒ½ç”Ÿæˆdockerå®¹å™¨</li><li>imageå¯ä»¥çœ‹æˆdockerå®¹å™¨çš„æ¨¡æ¿,ç±»ä¼¼class,å®¹å™¨å°±æ˜¯å®ä¾‹</li><li>Docker æ ¹æ® image æ–‡ä»¶ç”Ÿæˆå®¹å™¨çš„å®ä¾‹</li><li>åŒä¸€ä¸ª image æ–‡ä»¶ï¼Œå¯ä»¥ç”Ÿæˆå¤šä¸ªåŒæ—¶è¿è¡Œçš„å®¹å™¨å®ä¾‹</li><li>é•œåƒä¸æ˜¯ä¸€ä¸ªå•ä¸€çš„æ–‡ä»¶ï¼Œè€Œæ˜¯æœ‰å¤šå±‚ï¼Œç±»ä¼¼è¿è¾“è½¦çš„é›†è£…ç®±çš„å †é›†</li><li>å®¹å™¨å…¶å®å°±æ˜¯åœ¨é•œåƒçš„æœ€ä¸Šé¢åŠ äº†ä¸€å±‚è¯»å†™å±‚ï¼Œåœ¨è¿è¡Œå®¹å™¨é‡Œåšçš„ä»»ä½•æ–‡ä»¶æ”¹åŠ¨ï¼Œéƒ½ä¼šå†™åˆ°è¿™ä¸ªè¯»å†™å±‚é‡Œã€‚å¦‚æœå®¹å™¨åˆ é™¤äº†ï¼Œæœ€ä¸Šé¢çš„è¯»å†™å±‚ä¹Ÿå°±åˆ é™¤äº†ï¼Œæ”¹åŠ¨ä¹Ÿå°±ä¸¢å¤±äº†</li><li>æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>docker history &lt;ID/NAME&gt;</code> æŸ¥çœ‹é•œåƒä¸­å„å±‚å†…å®¹åŠå¤§å°ï¼Œæ¯å±‚å¯¹åº”ç€<code>Dockerfile</code>ä¸­çš„ä¸€æ¡æŒ‡ä»¤</li></ul><h3 id="imageçš„ç›¸å…³æŒ‡ä»¤" tabindex="-1">imageçš„ç›¸å…³æŒ‡ä»¤ <a class="header-anchor" href="#imageçš„ç›¸å…³æŒ‡ä»¤" aria-hidden="true">#</a></h3><table><thead><tr><th style="text-align:left;">å‘½ä»¤</th><th style="text-align:left;">å«ä¹‰</th><th style="text-align:left;">è¯­æ³•</th><th style="text-align:left;">æ¡ˆä¾‹</th></tr></thead><tbody><tr><td style="text-align:left;">ls</td><td style="text-align:left;">æŸ¥çœ‹å…¨éƒ¨é•œåƒ</td><td style="text-align:left;">docker image ls</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">search</td><td style="text-align:left;">æŸ¥æ‰¾é•œåƒ</td><td style="text-align:left;">docker search [imageName]</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">history</td><td style="text-align:left;">æŸ¥çœ‹é•œåƒå†å²</td><td style="text-align:left;">docker history [imageName]</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">inspect</td><td style="text-align:left;">æ˜¾ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªé•œåƒè¯¦ç»†ä¿¡æ¯</td><td style="text-align:left;">docker inspect [imageName]</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">pull</td><td style="text-align:left;">æ‹‰å–é•œåƒ</td><td style="text-align:left;">docker pull [imageName]</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">push</td><td style="text-align:left;">æ¨é€ä¸€ä¸ªé•œåƒåˆ°é•œåƒä»“åº“</td><td style="text-align:left;">docker push [imageName]</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">rmi</td><td style="text-align:left;">åˆ é™¤é•œåƒ</td><td style="text-align:left;">docker rmi [imageName] docker image rmi 2</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">prune</td><td style="text-align:left;">ç§»é™¤æœªä½¿ç”¨çš„é•œåƒï¼Œæ²¡æœ‰æ ‡è®°æˆ–è¡¥ä»»ä½•å®¹å™¨å¼•ç”¨</td><td style="text-align:left;">docker image prune</td><td style="text-align:left;">docker image prune</td></tr><tr><td style="text-align:left;">tag</td><td style="text-align:left;">æ ‡è®°æœ¬åœ°é•œåƒï¼Œå°†å…¶å½’å…¥æŸä¸€ä»“åº“</td><td style="text-align:left;">docker tag [OPTIONS] IMAGE[:TAG] [REGISTRYHOST/][USERNAME/]NAME[:TAG]</td><td style="text-align:left;">docker tag centos:7 zhangrenyang/centos:v1</td></tr><tr><td style="text-align:left;">export</td><td style="text-align:left;">å°†å®¹å™¨æ–‡ä»¶ç³»ç»Ÿä½œä¸ºä¸€ä¸ªtarå½’æ¡£æ–‡ä»¶å¯¼å‡ºåˆ°STDOUT</td><td style="text-align:left;">docker export [OPTIONS] CONTAINER</td><td style="text-align:left;">docker export -o hello-world.tar b2712f1067a3</td></tr><tr><td style="text-align:left;">import</td><td style="text-align:left;">å¯¼å…¥å®¹å™¨å¿«ç…§æ–‡ä»¶ç³»ç»Ÿtarå½’æ¡£æ–‡ä»¶å¹¶åˆ›å»ºé•œåƒ</td><td style="text-align:left;">docker import [OPTIONS] file/URL/- [REPOSITORY[:TAG]]</td><td style="text-align:left;">docker import hello-world.tar</td></tr><tr><td style="text-align:left;">save</td><td style="text-align:left;">å°†æŒ‡å®šé•œåƒä¿å­˜æˆ<code>tar</code>æ–‡ä»¶</td><td style="text-align:left;">docker save [OPTIONS] IMAGE [IMAGE...]</td><td style="text-align:left;">docker save -o hello-world.tar hello-world:latest</td></tr><tr><td style="text-align:left;">load</td><td style="text-align:left;">åŠ è½½taræ–‡ä»¶å¹¶åˆ›å»ºé•œåƒ</td><td style="text-align:left;"></td><td style="text-align:left;">docker load -i hello-world.tar</td></tr><tr><td style="text-align:left;">build</td><td style="text-align:left;">æ ¹æ®Dockerfileæ„å»ºé•œåƒ</td><td style="text-align:left;">docker build [OPTIONS] PATH / URL / -</td><td style="text-align:left;">docker build -t zf/ubuntu:v1 .</td></tr></tbody></table><h2 id="å®¹å™¨container" tabindex="-1">å®¹å™¨container <a class="header-anchor" href="#å®¹å™¨container" aria-hidden="true">#</a></h2><ul><li><code>docker run</code> å‘½ä»¤ä¼šä» <code>image</code> æ–‡ä»¶ï¼Œç”Ÿæˆä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨å®ä¾‹ã€‚</li><li><code>docker container run</code>å‘½ä»¤å…·æœ‰è‡ªåŠ¨æŠ“å– image æ–‡ä»¶çš„åŠŸèƒ½ã€‚å¦‚æœå‘ç°æœ¬åœ°æ²¡æœ‰æŒ‡å®šçš„ image æ–‡ä»¶ï¼Œå°±ä¼šä»ä»“åº“è‡ªåŠ¨æŠ“å–</li><li>è¾“å‡ºæç¤ºä»¥åï¼Œhello worldå°±ä¼šåœæ­¢è¿è¡Œï¼Œå®¹å™¨è‡ªåŠ¨ç»ˆæ­¢ã€‚</li><li>æœ‰äº›å®¹å™¨ä¸ä¼šè‡ªåŠ¨ç»ˆæ­¢</li><li>image æ–‡ä»¶ç”Ÿæˆçš„å®¹å™¨å®ä¾‹ï¼Œæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç§°ä¸ºå®¹å™¨æ–‡ä»¶</li><li>å®¹å™¨ç”Ÿæˆï¼Œå°±ä¼šåŒæ—¶å­˜åœ¨ä¸¤ä¸ªæ–‡ä»¶ï¼š image æ–‡ä»¶å’Œå®¹å™¨æ–‡ä»¶</li><li>å…³é—­å®¹å™¨å¹¶ä¸ä¼šåˆ é™¤å®¹å™¨æ–‡ä»¶ï¼Œåªæ˜¯å®¹å™¨åœæ­¢è¿è¡Œ</li></ul><h3 id="container-å‘½ä»¤" tabindex="-1">container å‘½ä»¤ <a class="header-anchor" href="#container-å‘½ä»¤" aria-hidden="true">#</a></h3><table><thead><tr><th>run</th><th>ä»é•œåƒè¿è¡Œä¸€ä¸ªå®¹å™¨</th><th>docker run ubuntu /bin/echo &#39;hello-world&#39;</th></tr></thead><tbody><tr><td>ls</td><td>åˆ—å‡ºå®¹å™¨</td><td>docker container ls</td></tr><tr><td>inspect</td><td>æ˜¾ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨è¯¦ç»†ä¿¡æ¯</td><td>docker inspect</td></tr><tr><td>attach</td><td>è¦attachä¸Šå»çš„å®¹å™¨å¿…é¡»æ­£åœ¨è¿è¡Œï¼Œå¯ä»¥åŒæ—¶è¿æ¥ä¸ŠåŒä¸€ä¸ªcontaineræ¥å…±äº«å±å¹•</td><td>docker attach [OPTIONS] CONTAINER<br>docker attach 6d1a25f95132</td></tr><tr><td>stats</td><td>æ˜¾ç¤ºå®¹å™¨èµ„æºä½¿ç”¨ç»Ÿè®¡</td><td>docker container stats</td></tr><tr><td>top</td><td>åœæ­¢ä¸€ä¸ªå®¹å™¨è¿è¡Œçš„è¿›ç¨‹</td><td>docker container top</td></tr><tr><td>update</td><td>æ›´æ–°ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨é…ç½®</td><td>docker update -m 500m --memory-swap -1 6d1a25f95132</td></tr><tr><td>port</td><td>åˆ—å‡ºæŒ‡å®šçš„å®¹å™¨çš„ç«¯å£æ˜ å°„</td><td>docker run -d -p 8080:80 nginx docker container port containerID</td></tr><tr><td>ps</td><td>æŸ¥çœ‹å½“å‰è¿è¡Œçš„å®¹å™¨</td><td>docker ps -a -l</td></tr><tr><td>kill [containerId]</td><td>ç»ˆæ­¢å®¹å™¨(å‘é€SIGKILL )</td><td>docker kill [containerId]</td></tr><tr><td>rm [containerId]</td><td>åˆ é™¤å®¹å™¨</td><td>docker rm [containerId]</td></tr><tr><td>start [containerId]</td><td>å¯åŠ¨å·²ç»ç”Ÿæˆã€å·²ç»åœæ­¢è¿è¡Œçš„å®¹å™¨æ–‡ä»¶</td><td>docker start [containerId]</td></tr><tr><td>stop [containerId]</td><td>ç»ˆæ­¢å®¹å™¨è¿è¡Œ (å‘é€ SIGTERM )</td><td>docker stop [containerId] docker container stop $(docker container ps -aq)</td></tr><tr><td>logs [containerId]</td><td>æŸ¥çœ‹ docker å®¹å™¨çš„è¾“å‡º</td><td>docker logs [containerId]</td></tr><tr><td>exec [containerId]</td><td>è¿›å…¥ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ docker å®¹å™¨æ‰§è¡Œå‘½ä»¤</td><td>docker container exec -it f6a53629488b /bin/bash</td></tr><tr><td>cp [containerId]</td><td>ä»æ­£åœ¨è¿è¡Œçš„ Docker å®¹å™¨é‡Œé¢ï¼Œå°†æ–‡ä»¶æ‹·è´åˆ°æœ¬æœº</td><td>docker container cp f6a53629488b:/root/root.txt .</td></tr><tr><td>commit [containerId]</td><td>æ ¹æ®ä¸€ä¸ªç°æœ‰å®¹å™¨åˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒ</td><td>docker commit -a &quot;zhufeng&quot; -m &quot;mynginx&quot; a404c6c174a2 mynginx:v1</td></tr></tbody></table><p>dockerå®¹å™¨çš„ä¸»çº¿ç¨‹ï¼ˆdockfileä¸­CMDæ‰§è¡Œçš„å‘½ä»¤ï¼‰ç»“æŸï¼Œå®¹å™¨ä¼šé€€å‡º</p><ul><li>ä»¥ä½¿ç”¨äº¤äº’å¼å¯åŠ¨ <code>docker run -i [CONTAINER_NAME or CONTAINER_ID]</code></li><li>ttyé€‰é¡¹ <code>docker run -dit [CONTAINER_NAME or CONTAINER_ID]</code></li><li>å®ˆæŠ¤æ€ï¼ˆDaemonizedï¼‰å½¢å¼è¿è¡Œ <code>docker run -d ubuntu /bin/sh -c &quot;while true; do echo hello world; sleep 1; done&quot;</code></li></ul><h3 id="å¯åŠ¨å®¹å™¨" tabindex="-1">å¯åŠ¨å®¹å™¨ <a class="header-anchor" href="#å¯åŠ¨å®¹å™¨" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ubuntu</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/bin/echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Hello world</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><ul><li>docker: Docker çš„äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ã€‚</li><li>run:ä¸å‰é¢çš„ docker ç»„åˆæ¥è¿è¡Œä¸€ä¸ªå®¹å™¨ã€‚</li><li>ubuntuæŒ‡å®šè¦è¿è¡Œçš„é•œåƒï¼ŒDockeré¦–å…ˆä»æœ¬åœ°ä¸»æœºä¸ŠæŸ¥æ‰¾é•œåƒæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼ŒDocker å°±ä¼šä»é•œåƒä»“åº“ Docker Hub ä¸‹è½½å…¬å…±é•œåƒã€‚</li><li>/bin/echo &quot;Hello world&quot;: åœ¨å¯åŠ¨çš„å®¹å™¨é‡Œæ‰§è¡Œçš„å‘½ä»¤</li></ul><blockquote><p>Dockerä»¥ubuntué•œåƒåˆ›å»ºä¸€ä¸ªæ–°å®¹å™¨ï¼Œç„¶ååœ¨å®¹å™¨é‡Œæ‰§è¡Œ bin/echo &quot;Hello world&quot;ï¼Œç„¶åè¾“å‡ºç»“æœ</p><ul><li>Docker attachå¿…é¡»æ˜¯ç™»é™†åˆ°ä¸€ä¸ªå·²ç»è¿è¡Œçš„å®¹å™¨é‡Œã€‚éœ€è¦æ³¨æ„çš„æ˜¯å¦‚æœä»è¿™ä¸ªå®¹å™¨ä¸­exité€€å‡ºçš„è¯ï¼Œå°±ä¼šå¯¼è‡´å®¹å™¨åœæ­¢</li></ul></blockquote><table><thead><tr><th style="text-align:left;">å‚æ•°</th><th style="text-align:left;">å«ä¹‰</th></tr></thead><tbody><tr><td style="text-align:left;">-i --interactive</td><td style="text-align:left;">äº¤äº’å¼</td></tr><tr><td style="text-align:left;">-t --tty</td><td style="text-align:left;">åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯</td></tr><tr><td style="text-align:left;">-d --detach</td><td style="text-align:left;">è¿è¡Œå®¹å™¨åˆ°åå°</td></tr><tr><td style="text-align:left;">-a --attach list</td><td style="text-align:left;">é™„åŠ åˆ°è¿è¡Œçš„å®¹å™¨</td></tr><tr><td style="text-align:left;">-e --env list</td><td style="text-align:left;">è®¾ç½®ç¯å¢ƒå˜é‡</td></tr><tr><td style="text-align:left;">-p --publish list</td><td style="text-align:left;">å‘å¸ƒå®¹å™¨ç«¯å£åˆ°ä¸»æœº</td></tr><tr><td style="text-align:left;">-P</td><td style="text-align:left;">--publish-all</td></tr></tbody></table><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1010</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">80</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-e</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">username=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">zhufeng</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span><span style="color:#A6ACCD;"> \ </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">container</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">3695dc5b9c2d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/bin/bash</span></span>
<span class="line"></span></code></pre></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx-test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8080</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">80</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span></span>
<span class="line"></span></code></pre></div><p>--name å®¹å™¨åç§°</p><h4 id="è¿›å…¥ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨" tabindex="-1">è¿›å…¥ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨ <a class="header-anchor" href="#è¿›å…¥ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨" aria-hidden="true">#</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">container</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">containerID</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/bin/bash</span></span>
<span class="line"></span></code></pre></div><h4 id="å®¹å™¨çš„ç«¯å£æ˜ å°„" tabindex="-1">å®¹å™¨çš„ç«¯å£æ˜ å°„ <a class="header-anchor" href="#å®¹å™¨çš„ç«¯å£æ˜ å°„" aria-hidden="true">#</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8080</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">80</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span></code></pre></div><h3 id="å®¹å™¨åˆ¶ä½œä¸ªæ€§åŒ–image" tabindex="-1">å®¹å™¨åˆ¶ä½œä¸ªæ€§åŒ–image <a class="header-anchor" href="#å®¹å™¨åˆ¶ä½œä¸ªæ€§åŒ–image" aria-hidden="true">#</a></h3><ul><li>docker commit :ä»å®¹å™¨åˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒã€‚</li><li>docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]] <ul><li>-a :æäº¤çš„é•œåƒä½œè€…</li><li>-c :ä½¿ç”¨DockerfileæŒ‡ä»¤æ¥åˆ›å»ºé•œåƒ</li><li>-m :æäº¤æ—¶çš„è¯´æ˜æ–‡å­—</li><li>-p :åœ¨commitæ—¶ï¼Œå°†å®¹å™¨æš‚åœ</li></ul></li><li>åœæ­¢å®¹å™¨åä¸ä¼šè‡ªåŠ¨åˆ é™¤è¿™ä¸ªå®¹å™¨ï¼Œé™¤éåœ¨å¯åŠ¨å®¹å™¨çš„æ—¶å€™æŒ‡å®šäº† --rm æ ‡å¿—</li><li>ä½¿ç”¨ docker ps -a å‘½ä»¤æŸ¥çœ‹ Docker ä¸»æœºä¸ŠåŒ…å«åœæ­¢çš„å®¹å™¨åœ¨å†…çš„æ‰€æœ‰å®¹å™¨</li><li>åœæ­¢çŠ¶æ€çš„å®¹å™¨çš„å¯å†™å±‚ä»ç„¶å ç”¨ç£ç›˜ç©ºé—´ã€‚è¦æ¸…ç†å¯ä»¥ä½¿ç”¨ <code>docker container prune</code> å‘½ä»¤</li></ul><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">container</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">commit</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-m</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">my-nginx</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-a</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">zs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">3695dc5b9c2d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">zs/mynginx:v1</span></span>
<span class="line"></span></code></pre></div><h2 id="dockerfileæ–‡ä»¶" tabindex="-1">Dockerfileæ–‡ä»¶ <a class="header-anchor" href="#dockerfileæ–‡ä»¶" aria-hidden="true">#</a></h2><ul><li>Docker çš„é•œåƒæ˜¯ç”¨ä¸€å±‚ä¸€å±‚çš„æ–‡ä»¶ç»„æˆçš„</li><li><code>docker inspect</code>å‘½ä»¤å¯ä»¥æŸ¥çœ‹é•œåƒæˆ–è€…å®¹å™¨</li><li>Layerså°±æ˜¯é•œåƒçš„å±‚æ–‡ä»¶ï¼Œåªè¯»ä¸èƒ½ä¿®æ”¹ã€‚åŸºäºé•œåƒåˆ›å»ºçš„å®¹å™¨ä¼šå…±äº«è¿™äº›æ–‡ä»¶å±‚</li></ul><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">inspect</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span></span>
<span class="line"></span></code></pre></div><h3 id="æŒ‡ä»¤" tabindex="-1">æŒ‡ä»¤ <a class="header-anchor" href="#æŒ‡ä»¤" aria-hidden="true">#</a></h3><table><thead><tr><th style="text-align:left;">æŒ‡ä»¤</th><th style="text-align:left;">å«ä¹‰</th><th style="text-align:left;">ç¤ºä¾‹</th></tr></thead><tbody><tr><td style="text-align:left;">FROM</td><td style="text-align:left;">æ„å»ºçš„æ–°é•œåƒæ˜¯åŸºäºå“ªä¸ªé•œåƒ</td><td style="text-align:left;">FROM centos:6</td></tr><tr><td style="text-align:left;">MAINTAINER</td><td style="text-align:left;">é•œåƒç»´æŠ¤è€…å§“åæˆ–é‚®ç®±åœ°å€</td><td style="text-align:left;">MAINTAINER zhufengjiagou</td></tr><tr><td style="text-align:left;">RUN</td><td style="text-align:left;">æ„å»ºé•œåƒæ—¶è¿è¡Œçš„shellå‘½ä»¤</td><td style="text-align:left;">RUN yum install httpd</td></tr><tr><td style="text-align:left;">CMD</td><td style="text-align:left;">CMD è®¾ç½®å®¹å™¨å¯åŠ¨åé»˜è®¤æ‰§è¡Œçš„å‘½ä»¤åŠå…¶å‚æ•°ï¼Œä½† CMD èƒ½å¤Ÿè¢« docker run åé¢è·Ÿçš„å‘½ä»¤è¡Œå‚æ•°æ›¿æ¢</td><td style="text-align:left;">CMD /usr/sbin/sshd -D</td></tr><tr><td style="text-align:left;">EXPOSE</td><td style="text-align:left;">å£°æ˜å®¹å™¨è¿è¡Œçš„æœåŠ¡å™¨ç«¯å£</td><td style="text-align:left;">EXPOSE 80 443</td></tr><tr><td style="text-align:left;">ENV</td><td style="text-align:left;">è®¾ç½®å®¹å™¨å†…çš„ç¯å¢ƒå˜é‡</td><td style="text-align:left;">ENV MYSQL_ROOT_PASSWORD 123456</td></tr><tr><td style="text-align:left;">ADD</td><td style="text-align:left;">æ‹·è´æ–‡ä»¶æˆ–ç›®å½•åˆ°é•œåƒä¸­ï¼Œå¦‚æœæ˜¯URLæˆ–è€…å‹ç¼©åŒ…ä¼šè‡ªåŠ¨ä¸‹è½½å’Œè§£å‹</td><td style="text-align:left;">ADD ,ADD <a href="https://xxx.com/html.tar.gz" target="_blank" rel="noreferrer">https://xxx.com/html.tar.gz</a> /var/<a href="http://www.html/" target="_blank" rel="noreferrer">www.html</a>, ADD html.tar.gz /var/www/html</td></tr><tr><td style="text-align:left;">COPY</td><td style="text-align:left;">æ‹·è´æ–‡ä»¶æˆ–ç›®å½•åˆ°é•œåƒ</td><td style="text-align:left;">COPY ./start.sh /start.sh</td></tr><tr><td style="text-align:left;">ENTRYPOINT</td><td style="text-align:left;">é…ç½®å®¹å™¨å¯åŠ¨æ—¶è¿è¡Œçš„å‘½ä»¤</td><td style="text-align:left;">ENTRYPOINT /bin/bash -c &#39;/start.sh&#39;</td></tr><tr><td style="text-align:left;">VOLUME</td><td style="text-align:left;">æŒ‡å®šå®¹å™¨æŒ‚è½½ç‚¹åˆ°å®¿ä¸»è‡ªåŠ¨ç”Ÿæˆçš„ç›®å½•æˆ–å…¶å®ƒå®¹å™¨</td><td style="text-align:left;">VOLUME [&quot;/var/lib/mysql&quot;]</td></tr><tr><td style="text-align:left;">USER</td><td style="text-align:left;">ä¸º RUN CMDå’ŒENTRYPOINTæ‰§è¡Œå‘½ä»¤æŒ‡å®šè¿è¡Œç”¨æˆ·</td><td style="text-align:left;">USER zhufengjiagou</td></tr><tr><td style="text-align:left;">WORKDIR</td><td style="text-align:left;">ä¸ºRUN CMD ENTRYPOINT COPY ADD è®¾ç½®å·¥ä½œç›®å½•</td><td style="text-align:left;">WORKDIR /data</td></tr><tr><td style="text-align:left;">HEALTHCHECK</td><td style="text-align:left;">å¥åº·æ£€æŸ¥</td><td style="text-align:left;">HEALTHCHECK --interval=5m --timeout=3s --retries=3 CMS curl -f htp://localhost</td></tr><tr><td style="text-align:left;">ARG</td><td style="text-align:left;">åœ¨æ„å»ºé•œåƒæ—¶æŒ‡å®šä¸€äº›å‚æ•°</td><td style="text-align:left;">ARG user</td></tr></tbody></table><h3 id="dockerignore-è¡¨ç¤ºè¦æ’é™¤-ä¸è¦æ‰“åŒ…åˆ°imageä¸­çš„æ–‡ä»¶è·¯å¾„" tabindex="-1">.dockerignore è¡¨ç¤ºè¦æ’é™¤ï¼Œä¸è¦æ‰“åŒ…åˆ°imageä¸­çš„æ–‡ä»¶è·¯å¾„ <a class="header-anchor" href="#dockerignore-è¡¨ç¤ºè¦æ’é™¤-ä¸è¦æ‰“åŒ…åˆ°imageä¸­çš„æ–‡ä»¶è·¯å¾„" aria-hidden="true">#</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">.git</span></span>
<span class="line"><span style="color:#FFCB6B;">node_modules</span></span>
<span class="line"></span></code></pre></div><p>dockerfile</p><div class="language-dockerfile"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">FROM node</span></span>
<span class="line"><span style="color:#A6ACCD;">COPY ./app /app</span></span>
<span class="line"><span style="color:#A6ACCD;">WORKDIR /app</span></span>
<span class="line"><span style="color:#A6ACCD;">RUN npm install</span></span>
<span class="line"><span style="color:#A6ACCD;">EXPOSE 3000</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>åˆ›å»ºimage</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-t</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">express-demo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.</span></span>
<span class="line"></span></code></pre></div><ul><li>-tç”¨æ¥æŒ‡å®šimageé•œåƒçš„åç§°ï¼Œåé¢è¿˜å¯ä»¥åŠ å†’å·æŒ‡å®šæ ‡ç­¾ï¼Œå¦‚æœä¸æŒ‡å®šé»˜è®¤å°±æ˜¯latest</li><li><code>.</code> è¡¨ç¤ºDockerfileæ–‡ä»¶çš„æ‰€æœ‰è·¯å¾„,<code>.</code>å°±è¡¨ç¤ºå½“å‰è·¯å¾„</li></ul><p>è¿è¡Œç”Ÿæˆå®¹å™¨å¹¶åœ¨åå°è¿è¡Œ</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">container</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3333</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">3000</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">express-demo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span></span>
<span class="line"></span></code></pre></div><h4 id="cmdæŒ‡ä»¤" tabindex="-1">cmdæŒ‡ä»¤ <a class="header-anchor" href="#cmdæŒ‡ä»¤" aria-hidden="true">#</a></h4><p>dockefile</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">FROM</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">node:15.10.0-slim</span></span>
<span class="line"><span style="color:#FFCB6B;">COPY</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./app</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/app</span></span>
<span class="line"><span style="color:#FFCB6B;">WORKDIR</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/app</span></span>
<span class="line"><span style="color:#FFCB6B;">USER</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root</span></span>
<span class="line"><span style="color:#FFCB6B;">RUN</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">--registry=https://registry.npm.taobao.org</span></span>
<span class="line"><span style="color:#FFCB6B;">EXPOSE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3000</span></span>
<span class="line"><span style="color:#FFCB6B;">CMD</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span></span>
<span class="line"></span></code></pre></div><p>é‡æ–°åˆ¶ä½œåšé•œåƒå¹¶è¿è¡Œå®¹å™¨</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-t</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">express-demo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">container</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3333</span><span style="color:#C3E88D;">:</span><span style="color:#F78C6C;">3000</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">express-demo</span></span>
<span class="line"></span></code></pre></div><ul><li>RUNå‘½ä»¤åœ¨ image æ–‡ä»¶çš„æ„å»ºé˜¶æ®µæ‰§è¡Œï¼Œæ‰§è¡Œç»“æœéƒ½ä¼šæ‰“åŒ…è¿›å…¥ image æ–‡ä»¶ï¼›CMDå‘½ä»¤åˆ™æ˜¯åœ¨å®¹å™¨å¯åŠ¨åæ‰§è¡Œ</li><li>ä¸€ä¸ª Dockerfile å¯ä»¥åŒ…å«å¤šä¸ªRUNå‘½ä»¤ï¼Œä½†æ˜¯åªèƒ½æœ‰ä¸€ä¸ªCMDå‘½ä»¤</li><li>æŒ‡å®šäº†CMDå‘½ä»¤ä»¥åï¼Œdocker container runå‘½ä»¤å°±ä¸èƒ½é™„åŠ å‘½ä»¤äº†ï¼ˆæ¯”å¦‚å‰é¢çš„/bin/bashï¼‰ï¼Œå¦åˆ™å®ƒä¼šè¦†ç›–CMDå‘½ä»¤</li></ul><h2 id="æ•°æ®å·volume" tabindex="-1">æ•°æ®å·volume <a class="header-anchor" href="#æ•°æ®å·volume" aria-hidden="true">#</a></h2><p>åˆ é™¤å®¹å™¨çš„æ—¶å€™ï¼Œå®¹å™¨å±‚é‡Œåˆ›å»ºçš„æ–‡ä»¶ä¹Ÿä¼šè¢«åˆ é™¤æ‰ï¼Œå¦‚æœæœ‰äº›æ•°æ®ä½ æƒ³æ°¸ä¹…ä¿å­˜ï¼Œæ¯”å¦‚WebæœåŠ¡å™¨çš„æ—¥å¿—ï¼Œæ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­çš„æ•°æ®ï¼Œå¯ä»¥ä¸ºå®¹å™¨åˆ›å»ºä¸€ä¸ªæ•°æ®ç›˜</p><img src="/assets/image-20230315143429170.10852ca8.png" alt="image-20230315143429170" style="zoom:50%;"><ul><li>volumes Dockerç®¡ç†å®¿ä¸»æœºæ–‡ä»¶ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†(/var/lib/docker/volumes)</li><li>å¦‚æœæ²¡æœ‰æŒ‡å®šå·ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ›å»º</li><li>å»ºè®®ä½¿ç”¨--mount ,æ›´é€šç”¨</li></ul><h2 id="ç½‘ç»œè®¾ç½®" tabindex="-1">ç½‘ç»œè®¾ç½® <a class="header-anchor" href="#ç½‘ç»œè®¾ç½®" aria-hidden="true">#</a></h2><ul><li>å®‰è£…Dockeræ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨åˆ›å»ºä¸‰ä¸ªç½‘ç»œï¼Œbridgeï¼ˆåˆ›å»ºå®¹å™¨é»˜è®¤è¿æ¥åˆ°æ­¤ç½‘ç»œï¼‰ã€ none ã€host <ul><li>Noneï¼šè¯¥æ¨¡å¼å…³é—­äº†å®¹å™¨çš„ç½‘ç»œåŠŸèƒ½,å¯¹å¤–ç•Œå®Œå…¨éš”ç¦»</li><li>hostï¼šå®¹å™¨å°†ä¸ä¼šè™šæ‹Ÿå‡ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„IPç­‰ï¼Œè€Œæ˜¯ä½¿ç”¨å®¿ä¸»æœºçš„IPå’Œç«¯å£ã€‚</li><li>bridge æ¡¥æ¥ç½‘ç»œï¼Œæ­¤æ¨¡å¼ä¼šä¸ºæ¯ä¸€ä¸ªå®¹å™¨åˆ†é…IP</li></ul></li><li>å¯ä»¥ä½¿ç”¨è¯¥<code>--network</code>æ ‡å¿—æ¥æŒ‡å®šå®¹å™¨åº”è¿æ¥åˆ°å“ªäº›ç½‘ç»œ</li></ul><h2 id="compose" tabindex="-1">compose <a class="header-anchor" href="#compose" aria-hidden="true">#</a></h2><ul><li>Compose é€šè¿‡ä¸€ä¸ªé…ç½®æ–‡ä»¶æ¥ç®¡ç†å¤šä¸ªDockerå®¹å™¨</li><li>åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œæ‰€æœ‰çš„å®¹å™¨é€šè¿‡servicesæ¥å®šä¹‰ï¼Œç„¶åä½¿ç”¨docker-composeè„šæœ¬æ¥å¯åŠ¨ã€åœæ­¢å’Œé‡å¯åº”ç”¨å’Œåº”ç”¨ä¸­çš„æœåŠ¡ä»¥åŠæ‰€æœ‰ä¾èµ–æœåŠ¡çš„å®¹å™¨</li><li>æ­¥éª¤ï¼š <ul><li>æœ€åï¼Œè¿è¡Œ<code>docker-compose up</code>ï¼ŒCompose å°†å¯åŠ¨å¹¶è¿è¡Œæ•´ä¸ªåº”ç”¨ç¨‹åº é…ç½®æ–‡ä»¶ç»„æˆ</li><li>services å¯ä»¥å®šä¹‰éœ€è¦çš„æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡éƒ½æœ‰è‡ªå·±çš„åå­—ã€ä½¿ç”¨çš„é•œåƒã€æŒ‚è½½çš„æ•°æ®å·æ‰€å±çš„ç½‘ç»œå’Œä¾èµ–çš„å…¶å®ƒæœåŠ¡</li><li>networks æ˜¯åº”ç”¨çš„ç½‘ç»œï¼Œåœ¨å®ƒä¸‹é¢å¯ä»¥å®šä¹‰ä½¿ç”¨çš„ç½‘ç»œåç§°ï¼Œç±»æ€§</li><li>volumesæ˜¯æ•°æ®å·ï¼Œå¯ä»¥åœ¨æ­¤å®šä¹‰æ•°æ®å·ï¼Œç„¶åæŒ‚è½½åˆ°ä¸åŒçš„æœåŠ¡ä¸Šé¢ä½¿ç”¨</li></ul></li></ul><p>å®‰è£…</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">epel-release</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">python-pip</span></span>
<span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">clean</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">all</span></span>
<span class="line"><span style="color:#FFCB6B;">pip</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker-compose</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># è®¾ç½®æƒé™</span></span>
<span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-L</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://get.daocloud.io/docker/compose/releases/download/v2.</span><span style="color:#F78C6C;">5.0</span><span style="color:#C3E88D;">/docker-compose-</span><span style="color:#89DDFF;">`</span><span style="color:#FFCB6B;">uname</span><span style="color:#C3E88D;"> -s</span><span style="color:#89DDFF;">`</span><span style="color:#FFCB6B;">-</span><span style="color:#89DDFF;">`</span><span style="color:#FFCB6B;">uname</span><span style="color:#C3E88D;"> -m</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/usr/local/bin/docker-compose</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">+x</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/local/bin/docker-compose</span></span>
<span class="line"><span style="color:#FFCB6B;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--version</span></span>
<span class="line"></span></code></pre></div><p>docker-compose.ymlæ–‡ä»¶</p><ul><li>åœ¨ <code>docker-compose.yml</code> ä¸­å®šä¹‰ç»„æˆåº”ç”¨ç¨‹åºçš„æœåŠ¡ï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥åœ¨éš”ç¦»çš„ç¯å¢ƒä¸­ä¸€èµ·è¿è¡Œ</li><li>ç©ºæ ¼ç¼©è¿›è¡¨ç¤ºå±‚æ¬¡</li><li>å†’å·ç©ºæ ¼åé¢æœ‰ç©ºæ ¼</li></ul><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">nginx1</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8080:80</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">nginx2</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8081:80</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">up</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span></span>
<span class="line"></span></code></pre></div><h3 id="å¯åŠ¨å‘½ä»¤" tabindex="-1">å¯åŠ¨å‘½ä»¤ <a class="header-anchor" href="#å¯åŠ¨å‘½ä»¤" aria-hidden="true">#</a></h3><table><thead><tr><th style="text-align:left;">å‘½ä»¤</th><th style="text-align:left;">æœåŠ¡</th></tr></thead><tbody><tr><td style="text-align:left;">docker-compose up</td><td style="text-align:left;">å¯åŠ¨æ‰€æœ‰çš„æœåŠ¡</td></tr><tr><td style="text-align:left;">docker-compose up -d</td><td style="text-align:left;">åå°å¯åŠ¨æ‰€æœ‰çš„æœåŠ¡</td></tr><tr><td style="text-align:left;">docker-compose ps</td><td style="text-align:left;">æ‰“å°æ‰€æœ‰çš„å®¹å™¨</td></tr><tr><td style="text-align:left;">docker-compose stop</td><td style="text-align:left;">åœæ­¢æ‰€æœ‰æœåŠ¡</td></tr><tr><td style="text-align:left;">docker-compose logs -f</td><td style="text-align:left;">æŒç»­è·Ÿè¸ªæ—¥å¿—</td></tr><tr><td style="text-align:left;">docker-compose exec nginx1 bash</td><td style="text-align:left;">è¿›å…¥nginx1æœåŠ¡ç³»ç»Ÿ</td></tr><tr><td style="text-align:left;">docker-compose rm nginx1</td><td style="text-align:left;">åˆ é™¤æœåŠ¡å®¹å™¨</td></tr><tr><td style="text-align:left;">docker network ls</td><td style="text-align:left;">æŸ¥çœ‹ç½‘ç»œç½‘ç»œä¸ä¼šåˆ é™¤</td></tr><tr><td style="text-align:left;">docker-compose down</td><td style="text-align:left;">åˆ é™¤æ‰€æœ‰çš„ç½‘ç»œå’Œå®¹å™¨</td></tr></tbody></table><blockquote><p>åˆ é™¤æ‰€æœ‰çš„å®¹å™¨ docker container rm <code>docker container ps -a -q</code></p></blockquote><h3 id="compose-é…ç½®æ•°æ®å·volume" tabindex="-1">compose é…ç½®æ•°æ®å·volume <a class="header-anchor" href="#compose-é…ç½®æ•°æ®å·volume" aria-hidden="true">#</a></h3><ul><li>networks æŒ‡å®šè‡ªå®šä¹‰ç½‘ç»œ</li><li>volumes æŒ‡å®šæ•°æ®å·</li><li>æ•°æ®å·åœ¨å®¿ä¸»æœºçš„ä½ç½® <code>/var/lib/docker/volumes/nginx-compose_data/_data</code></li></ul><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">nginx1</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8081:80</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">networks</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">newweb</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">data:/data</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./nginx1:/usr/share/nginx/html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">#å®¹å™¨ä¸ç³»ç»Ÿæ–‡ä»¶ä¼šåŒæ­¥</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">nginx2</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8082:80</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">networks</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">default</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">data:/data</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./nginx2:/usr/share/nginx/html</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">nginx3</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8083:80</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">networks</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">default</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">newweb</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">data:/data</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./nginx3:/usr/share/nginx/html</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">networks</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">newweb</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">driver</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bridge</span></span>
<span class="line"><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">data</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">driver</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">local</span></span>
<span class="line"></span></code></pre></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">up</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-itd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx-compose_nginx1_1</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">bash</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/data</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">touch</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">1.txt</span></span>
<span class="line"><span style="color:#82AAFF;">exit</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/var/lib/docker/volumes/nginx-compose_data/_data</span></span>
<span class="line"><span style="color:#FFCB6B;">ls</span></span>
<span class="line"></span></code></pre></div><h2 id="docker-compose-æ­å»ºnodeé¡¹ç›®" tabindex="-1">docker compose æ­å»ºnodeé¡¹ç›® <a class="header-anchor" href="#docker-compose-æ­å»ºnodeé¡¹ç›®" aria-hidden="true">#</a></h2><div class="language-dockerfile"><button title="Copy Code" class="copy"></button><span class="lang">dockerfile</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">version: &#39;2&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">services:</span></span>
<span class="line"><span style="color:#A6ACCD;"> node:</span></span>
<span class="line"><span style="color:#A6ACCD;">  build:</span></span>
<span class="line"><span style="color:#A6ACCD;">    context: ./images/node</span></span>
<span class="line"><span style="color:#A6ACCD;">    dockerfile: Dockerfile</span></span>
<span class="line"><span style="color:#A6ACCD;">  depends_on:</span></span>
<span class="line"><span style="color:#A6ACCD;">   - db</span></span>
<span class="line"><span style="color:#A6ACCD;"> web:</span></span>
<span class="line"><span style="color:#A6ACCD;">  image: nginx</span></span>
<span class="line"><span style="color:#A6ACCD;">  ports:</span></span>
<span class="line"><span style="color:#A6ACCD;">   - &quot;8080:80&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  volumes:</span></span>
<span class="line"><span style="color:#A6ACCD;">   - ./images/nginx/config:/etc/nginx/conf.d</span></span>
<span class="line"><span style="color:#A6ACCD;">   - ./images/node/web/public:/public  </span></span>
<span class="line"><span style="color:#A6ACCD;">  depends_on:</span></span>
<span class="line"><span style="color:#A6ACCD;">   - node</span></span>
<span class="line"><span style="color:#A6ACCD;"> db:</span></span>
<span class="line"><span style="color:#A6ACCD;">  image: mariadb</span></span>
<span class="line"><span style="color:#A6ACCD;">  environment:</span></span>
<span class="line"><span style="color:#A6ACCD;">   MYSQL_ROOT_PASSWORD: &quot;root&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">   MYSQL_DATABASE: &quot;node&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">   MYSQL_USER: &quot;zfpx&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">   MYSQL_PASSWORD: &quot;123456&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  volumes:</span></span>
<span class="line"><span style="color:#A6ACCD;">    - db:/var/lib/mysql</span></span>
<span class="line"><span style="color:#A6ACCD;">volumes:</span></span>
<span class="line"><span style="color:#A6ACCD;"> db:</span></span>
<span class="line"><span style="color:#A6ACCD;">  driver: local</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-c5936a1e data-v-e033cd21><div class="edit-info" data-v-e033cd21><div class="edit-link" data-v-e033cd21><a class="VPLink link edit-link-button" href="https://github.com/wendaobai/wendaobai.github.io/edit/master/docs/å‰ç«¯è¿ç»´/docker.md" target="_blank" rel="noreferrer" data-v-e033cd21 data-v-30c06bd3><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" data-v-e033cd21><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> æ›´æ­£é”™è¯¯<!--]--><!----></a></div><!----></div><div class="prev-next" data-v-e033cd21><div class="pager" data-v-e033cd21><a class="pager-link prev" href="/%E5%89%8D%E7%AB%AF%E8%BF%90%E7%BB%B4/CICD.html" data-v-e033cd21><span class="desc" data-v-e033cd21>Previous page</span><span class="title" data-v-e033cd21>CICD</span></a></div><div class="has-prev pager" data-v-e033cd21><a class="pager-link next" href="/%E5%89%8D%E7%AB%AF%E8%BF%90%E7%BB%B4/linux%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4.html" data-v-e033cd21><span class="desc" data-v-e033cd21>Next page</span><span class="title" data-v-e033cd21>linuxå¸¸è§å‘½ä»¤</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><footer class="VPFooter has-sidebar" data-v-93a960b4 data-v-d24360a6><div class="container" data-v-d24360a6><p class="message" data-v-d24360a6>MIT Licensed | Copyright Â© 2021 - 2022</p><p class="copyright" data-v-d24360a6>ç²¤ICPå¤‡2021165391å·</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"readme.md\":\"588a9682\",\"index.md\":\"c828e2a8\",\"js_interview_1.å®ç°newå®ä¾‹åŒ–å¯¹è±¡.md\":\"d9caf8ce\",\"ç½‘ç»œ_http.md\":\"c976406c\",\"js_interview_2.å®ç°call-apply-bind.md\":\"ff280bd6\",\"js_interview_4.å®ç°ç»§æ‰¿.md\":\"ef443afb\",\"ç½‘ç»œ_https.md\":\"c8b5674e\",\"å‰ç«¯è¿ç»´_docker.md\":\"e371afdf\",\"js_åŸºç¡€_2.ä½œç”¨åŸŸ.md\":\"9aa8ef31\",\"js_interview_3.å®ç°instanceof.md\":\"df253c67\",\"å‰ç«¯è¿ç»´_cicd.md\":\"8abdbfa5\",\"js_åŸºç¡€_3.åŸå‹é“¾.md\":\"0104212e\",\"ç½‘ç»œ_tcp.md\":\"95d30144\",\"å‰ç«¯è¿ç»´_vim.md\":\"eb2e1b3e\",\"js_es6_1.letå’Œconstå˜é‡å£°æ˜.md\":\"5b9f830a\",\"å‰ç«¯è¿ç»´_nginx.md\":\"68c008f8\",\"å‰ç«¯è¿ç»´_linuxå¸¸è§å‘½ä»¤.md\":\"b429cae3\",\"js_es6_5.ç®­å¤´å‡½æ•°.md\":\"ead3200b\",\"js_åŸºç¡€_1.å¯æ‰§è¡Œä¸Šä¸‹æ–‡.md\":\"08159271\",\"js_es6_3.symbolæ•°æ®ç±»å‹.md\":\"2d5ec4df\",\"js_es6_2.setä¸mapæ•°æ®ç»“æ„.md\":\"f395f0b7\",\"js_es6_4.proxyä»£ç†å™¨.md\":\"37a84031\"}")</script>
    <script type="module" async src="/assets/app.1c8695ff.js"></script>
    
  </body>
</html>