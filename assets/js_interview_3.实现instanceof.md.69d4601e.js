import{_ as s,c as n,o as a,e as l}from"./app.58766e8b.js";const C=JSON.parse('{"title":"instanceof 实现","description":"","frontmatter":{},"headers":[{"level":2,"title":"","slug":"","link":"#","children":[]}],"relativePath":"js/interview/3.实现instanceof.md"}'),o={name:"js/interview/3.实现instanceof.md"},p=l(`<h1 id="instanceof-实现" tabindex="-1">instanceof 实现 <a class="header-anchor" href="#instanceof-实现" aria-hidden="true">#</a></h1><ul><li>对象沿着<code>__prototype__</code>查找 构造器的<code>prototype</code>,能找到就返回true</li></ul><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">function </span><span style="color:#82AAFF;">_instanceof</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> b</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  let leftProto </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> a</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">__proto__</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">// 对象</span></span>
<span class="line"><span style="color:#A6ACCD;">  let rightPrototype </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> b</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">// 构造器</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;font-style:italic;">while</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">leftProto</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">leftProto </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> rightPrototype</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    leftProto </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> leftProto</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">__proto__</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// test</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">warn</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">_instanceof</span><span style="color:#89DDFF;">([],</span><span style="color:#A6ACCD;"> Array</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">warn</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">_instanceof</span><span style="color:#89DDFF;">([],</span><span style="color:#A6ACCD;"> Object</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">function </span><span style="color:#82AAFF;">Animal</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">a </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">let animal </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Animal</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">warn</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">_instanceof</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">animal</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> Animal</span><span style="color:#89DDFF;">));</span></span>
<span class="line"></span></code></pre></div><h2 id="" tabindex="-1"><a class="header-anchor" href="#" aria-hidden="true">#</a></h2>`,4),e=[p];function t(c,r,D,y,F,A){return a(),n("div",null,e)}const _=s(o,[["render",t]]);export{C as __pageData,_ as default};
